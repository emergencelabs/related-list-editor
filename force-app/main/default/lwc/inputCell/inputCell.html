<template>
  <div style="padding: 5px 10px;" class={containerClasses}>
    <template if:false={editing}>
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <template if:false={isNameField}>
          <a if:true={link} href={link}>{referenceValue.Name}</a>
          <c-formatted-tile-value
            if:false={link}
            value={value}
            field-type={fieldDetail.dataType}
          ></c-formatted-tile-value>
        </template>
        <template if:true={isNameField}>
          <a href={nameLink}>{value}</a>
        </template>
        <!-- <span>{value}</span> -->
        <lightning-button-icon
          variant="bare"
          icon-name={accessIconName}
          if:true={isHovering}
        ></lightning-button-icon>
      </div>
    </template>
    <template if:true={editing}>
      <span class="required slds-required" if:true={isRequired}>*</span>
      <lightning-input
        if:true={isBaseInput}
        variant="label-hidden"
        required={isRequired}
        value={value}
        type={inputDetails.componentDetails.type}
        formatter={inputDetails.componentDetails.formatter}
        disabled={disableInput}
        step={inputDetails.componentDetails.step}
        checked={inputDetails.componentDetails.checked}
        max={inputDetails.componentDetails.max}
        max-length={inputDetails.componentDetails.maxLength}
        date-style={inputDetails.componentDetails.dateStyle}
        class="slds-w-full"
        onchange={changeInputValue}
        onfocus={setKeyOveride}
        onblur={removeKeyOveride}
        autocomplete="off"
        style="min-height: calc(var(--lwc-heightInput, 1.875rem) + (1px * 2));"
      ></lightning-input>
      <button
        if:true={isModalInput}
        class="slds-grid slds-grid_align-end slds-box slds-grid_vertical-align-center"
        style="padding: 5px; width: 100%; background: none;"
        onclick={launchModalEdit}
      >
        <span>{modalValue}</span>
        <lightning-button-icon
          class="slds-m-left_small"
          variant="bare"
          icon-name="utility:new_window"
        ></lightning-button-icon>
      </button>
      <div if:true={isPicklistInput}>
        <c-picklist-input
          value={value}
          field-api-name={fieldDetail.apiName}
          object-api-name={objectApiName}
          record-type-id={recordTypeId}
          onselection={changeInputValue}
        ></c-picklist-input>
      </div>
      <c-slotted-modal
        if:true={modalIsOpen}
        modal-title={fieldDetail.label}
        onclose={closeModalEdit}
        size="small"
        save-button-label="Done"
      >
        <div class="slds-grid slds-grid_align-center slds-m-around_medium">
          <c-modal-input
            type={inputDetails.componentDetails.type}
            value={modalValue}
            field-api-name={fieldDetail.apiName}
            object-api-name={objectApiName}
            record-type-id={recordTypeId}
            label={fieldDetail.label}
          ></c-modal-input>
        </div>
      </c-slotted-modal>
    </template>
  </div>
</template>
